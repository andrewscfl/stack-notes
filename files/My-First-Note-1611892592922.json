{"title":"My First Note","content":"//write code or notes here! :)<div><br></div><div id=\"My-First-Note-1611892592922 -1611892612408\" class=\"editor\">// Save\n    $('.save').addEventListener('click', (event) =&gt; {\n        let editableDom = $('.SN-Notes');\n        let editors = editableDom.querySelectorAll('.editor');\n        let editorData = [];\n\n        editors.forEach(editor =&gt; {\n            let value = editor.id;\n            let text = ace.edit(value).getValue();\n            let editorPackage = {\n                id: value,\n                inner: text\n            };\n            editorData.push(editorPackage);\n        });\n\n        let content = $('.SN-Notes').innerHTML;\n        let targetContent = $('.SN-Notes');\n        let clonedDom = targetContent.cloneNode(true);\n        let codeEditors = clonedDom.querySelectorAll('.editor');\n\n        for (let i = 0; i &lt; codeEditors.length; i++) {\n            let elem = document.createElement('div');\n            elem.id = editorData[i].id;\n            elem.className = \"editor\";\n            elem.innerHTML = editorData[i].inner;\n            codeEditors[i].replaceWith(elem);\n        }\n        cl('printing virtual editor');\n        cl(clonedDom.innerHTML);\n\n\n\n        cl(content);\n        let response = ipc.sendSync('save-contents', {\n            contents: clonedDom.innerHTML,\n            filename: document.querySelector('.SN-note-tag').innerHTML\n        });\n        if (response.success) {\n            cl('worked');\n            init_paint();\n        }\n        else {\n            cl('not');\n        }\n    });\n// Delete\n    $('.delete').addEventListener('click', (event) =&gt; {\n        let targetNote = $('.SN-note-tag').innerHTML;\n        confirm(() =&gt; {\n            let response = ipc.sendSync('del-note', targetNote);\n            if (response.success) {\n                console.log('deleted');\n                clear_main_pain();\n                init_paint();\n            }\n            else {\n                console.log('error');\n            }\n        });\n    });\n// Code\n    $('.code').addEventListener('click', (event) =&gt; {\n\n\n        let editor = document.createElement('div'),\n            notePreTagStripped = $('.SN-note-tag').innerHTML,\n            noteTagStripped = notePreTagStripped.replace('.json', ''),\n            date = new Date(),\n            now = date.getTime(),\n            stringNow = now.toString(),\n            calc_id = `${noteTagStripped} -${stringNow}`\n\n        editor.id = calc_id;\n        editor.className = \"editor\";\n        editor.style.width = \"100%\";\n        editor.style.height = \"300px\";\n        let myBreak = document.createElement('br'),\n            languageSelectorinner = `\n        <select name=\"languages\" id=\"languages\" data-lang=\"PT\">\n          <option value=\"PT\">Plain Text</option>\n          <option value=\"C\">C</option>\n          <option value=\"C#\">C#</option>\n          <option value=\"C++\">C++</option>\n          <option value=\"Java\">Java</option>\n          <option value=\"JavaScript\">JavaScript</option>\n          <option value=\"Python\">Python</option>\n        </select>\n        `;\n        let languageSelector = document.createElement('div');\n        languageSelector.innerHTML = languageSelectorinner;\n\n        $('.SN-Notes').appendChild(myBreak);\n        $('.SN-Notes').appendChild(editor);\n        $('.SN-Notes').appendChild(languageSelector);\n        $('.SN-Notes').appendChild(myBreak);\n        let editorFrame = ace.edit(calc_id);\n        editorFrame.setTheme(\"ace/theme/idle_fingers\");\n\n\n        //add event listeners for changes\n\n\n        let selectors = languageSelector.querySelector('#languages');\n        selectors.addEventListener('change', (event) =&gt; {\n            let selected = event.target.value;\n            selectors.dataset.lang = selected;\n            cl(selected + \" was applied on \" + editor.id);\n            if (selected == \"C\") {\n                editorFrame.session.setMode(\"ace/mode/c_cpp\");\n            }\n            else if (selected == \"C#\") {\n                editorFrame.session.setMode(\"ace/mode/csharp\");\n            }\n            else if (selected == \"C++\") {\n                editorFrame.session.setMode(\"ace/mode/c_cpp\");\n            }\n            else if (selected == \"Java\") {\n                editorFrame.session.setMode(\"ace/mode/java\");\n            }\n            else if (selected == \"JavaScript\") {\n                editorFrame.session.setMode(\"ace/mode/javascript\");\n            }\n            else if (selected == \"Python\") {\n                editorFrame.session.setMode(\"ace/mode/python\");\n            }\n\n        });\n\n        //end event listeners for changes\n    });\n</div><div>\n        <select name=\"languages\" id=\"languages\" data-lang=\"JavaScript\">\n          <option value=\"PT\">Plain Text</option>\n          <option value=\"C\">C</option>\n          <option value=\"C#\">C#</option>\n          <option value=\"C++\">C++</option>\n          <option value=\"Java\">Java</option>\n          <option value=\"JavaScript\">JavaScript</option>\n          <option value=\"Python\">Python</option>\n        </select>\n        </div><br>"}